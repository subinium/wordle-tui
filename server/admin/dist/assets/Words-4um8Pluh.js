import{d as I,r as a,k as O,o as P,c as n,e,b as U,w as b,v as E,F as h,f as x,u as D,t as o,l as z,m as S,n as q,g as F,p as H,q as Z,a as u,_ as j}from"./index-CP5y1WOe.js";const G={class:"card"},J={class:"form-row mb-4"},K={class:"form-group",style:{width:"120px"}},Q=["value"],R={class:"form-group",style:{width:"120px"}},X=["value"],ee={key:0,class:"loading"},te={class:"word-display"},le=["onClick"],se={class:"pagination"},ae={class:"pagination-info"},oe={class:"pagination-buttons"},ne=["disabled"],ue=["disabled"],de={class:"modal"},ie={class:"modal-header"},re={class:"modal-title"},ve={class:"form-group"},ce=["readonly"],pe={class:"form-group"},me={class:"form-group"},fe={class:"modal-actions"},be=["disabled"],g=30,ge=I({__name:"Words",setup(ye){const M=a([]),y=a(0),w=a(!0),_=new Date().getFullYear(),W=a(_),C=a(null),d=a(0),r=a(!1),v=a(""),c=a(""),p=a(5),i=a(null),k=a(!1),m=a(!1),V=O(()=>new Date().toISOString().split("T")[0]);async function f(){w.value=!0;try{const s=await H({year:W.value||void 0,month:C.value||void 0,limit:g,offset:d.value});M.value=s.words,y.value=s.total}catch(s){console.error("Failed to load words",s)}w.value=!1}function N(s){return s===V.value?"badge-today":s>V.value?"badge-future":"badge-past"}function $(s){v.value=s.date,c.value=s.word,p.value=s.difficulty_rank,i.value=null,m.value=!1,r.value=!0}function B(){const s=new Date;s.setDate(s.getDate()+1),v.value=s.toISOString().split("T")[0],c.value="",p.value=5,i.value=null,m.value=!0,r.value=!0}async function L(){const s=c.value.toUpperCase().trim();if(s.length!==5){i.value={type:"error",message:"Word must be exactly 5 letters"};return}if(!/^[A-Z]+$/.test(s)){i.value={type:"error",message:"Word must contain only letters"};return}k.value=!0;try{const t=await Z(v.value,s,p.value);i.value={type:"success",message:t.created?"Word created!":"Word updated!"},setTimeout(()=>{r.value=!1,f()},500)}catch(t){i.value={type:"error",message:t.message}}k.value=!1}function T(){d.value=Math.max(0,d.value-g),f()}function Y(){d.value+=g,f()}function A(){d.value=0,f()}return P(f),(s,t)=>(u(),n("div",null,[e("div",G,[e("div",{class:"card-header"},[t[7]||(t[7]=e("h3",{class:"card-title"},"Word Management",-1)),e("button",{class:"btn btn-primary",onClick:B},"+ Add Word")]),e("div",J,[e("div",K,[t[9]||(t[9]=e("label",{class:"form-label"},"Year",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>W.value=l),class:"form-select",onChange:A},[t[8]||(t[8]=e("option",{value:null},"All",-1)),(u(!0),n(h,null,x([D(_)-1,D(_),D(_)+1],l=>(u(),n("option",{key:l,value:l},o(l),9,Q))),128))],544),[[E,W.value]])]),e("div",R,[t[11]||(t[11]=e("label",{class:"form-label"},"Month",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>C.value=l),class:"form-select",onChange:A},[t[10]||(t[10]=e("option",{value:null},"All",-1)),(u(),n(h,null,x(12,l=>e("option",{key:l,value:l},o(l),9,X)),64))],544),[[E,C.value]])])]),w.value?(u(),n("div",ee,[...t[12]||(t[12]=[e("div",{class:"spinner"},null,-1)])])):(u(),n(h,{key:1},[e("table",null,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Word"),e("th",null,"Difficulty"),e("th",null,"Actions")])],-1)),e("tbody",null,[(u(!0),n(h,null,x(M.value,l=>(u(),n("tr",{key:l.id},[e("td",null,[e("span",{class:F(["badge",N(l.date)])},o(l.date),3)]),e("td",null,[e("span",te,o(l.word),1)]),e("td",null,o(l.difficulty_rank),1),e("td",null,[e("button",{class:"btn btn-secondary btn-sm",onClick:_e=>$(l)},"Edit",8,le)])]))),128))])]),e("div",se,[e("span",ae," Showing "+o(d.value+1)+"-"+o(Math.min(d.value+g,y.value))+" of "+o(y.value),1),e("div",oe,[e("button",{class:"btn btn-secondary btn-sm",disabled:d.value===0,onClick:T}," Previous ",8,ne),e("button",{class:"btn btn-secondary btn-sm",disabled:d.value+g>=y.value,onClick:Y}," Next ",8,ue)])])],64))]),r.value?(u(),n("div",{key:0,class:"modal-overlay",onClick:t[6]||(t[6]=z(l=>r.value=!1,["self"]))},[e("div",de,[e("div",ie,[e("h3",re,o(m.value?"Add Word":"Edit Word"),1)]),e("div",ve,[t[14]||(t[14]=e("label",{class:"form-label"},"Date",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>v.value=l),type:"date",class:"form-input",readonly:!m.value,style:q({background:m.value?"":"var(--bg-secondary)"})},null,12,ce),[[S,v.value]])]),e("div",pe,[t[15]||(t[15]=e("label",{class:"form-label"},"Word (5 letters)",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>c.value=l),type:"text",class:"form-input word-input",maxlength:"5",placeholder:"HELLO"},null,512),[[S,c.value]])]),e("div",me,[t[16]||(t[16]=e("label",{class:"form-label"},"Difficulty (1-10)",-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>p.value=l),type:"number",class:"form-input",min:"1",max:"10",style:{width:"100px"}},null,512),[[S,p.value,void 0,{number:!0}]])]),i.value?(u(),n("div",{key:0,class:F(["message",`message-${i.value.type}`])},o(i.value.message),3)):U("",!0),e("div",fe,[e("button",{class:"btn btn-secondary",onClick:t[5]||(t[5]=l=>r.value=!1)},"Cancel"),e("button",{class:"btn btn-primary",disabled:k.value,onClick:L},o(k.value?"Saving...":"Save"),9,be)])])])):U("",!0)]))}}),he=j(ge,[["__scopeId","data-v-c7280f4e"]]);export{he as default};
