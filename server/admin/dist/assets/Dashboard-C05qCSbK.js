import{d as y,r,o as p,c as d,a as i,b as g,e as s,F as u,t as l,f as _,n as f,g as k,h as D,i as S,j as T,_ as w}from"./index-CP5y1WOe.js";const L={key:0,class:"loading"},x={class:"stats-grid"},A={class:"stat-card"},B={class:"stat-value"},C={class:"stat-card"},F={class:"stat-value"},M={class:"stat-card"},N={class:"stat-value"},$={class:"stat-sub"},j={class:"stat-card"},z={class:"stat-value"},G={class:"stat-card"},R={class:"stat-value"},U={class:"stat-card"},V={class:"stat-value word-display"},E={class:"stat-sub"},I={class:"charts-row"},O={class:"card"},P={class:"distribution-chart"},W={class:"distribution-label"},X={class:"distribution-bar-container"},q={class:"distribution-count"},H={class:"card"},J={key:0,class:"empty-state"},K={key:1},Q={key:0,class:"result-solved"},Y={key:1,class:"result-failed"},Z={class:"time-cell"},ss=y({__name:"Dashboard",setup(ts){const o=r(null),n=r({}),c=r([]),v=r(!0);async function b(){try{const[e,t]=await Promise.all([D(),S(10)]);if(o.value=e,c.value=t.leaderboard,e.today.date){const a=await T(e.today.date);n.value=a.distribution||{}}}catch(e){console.error("Failed to load data",e)}v.value=!1}function m(){const e=Object.values(n.value);return Math.max(...e,1)}function h(e){if(e===null)return"-";const t=Math.floor(e/60),a=e%60;return`${t}:${a.toString().padStart(2,"0")}`}return p(b),(e,t)=>(i(),d("div",null,[v.value?(i(),d("div",L,[...t[0]||(t[0]=[s("div",{class:"spinner"},null,-1)])])):o.value?(i(),d(u,{key:1},[s("div",x,[s("div",A,[t[1]||(t[1]=s("div",{class:"stat-label"},"Total Users",-1)),s("div",B,l(o.value.total_users),1)]),s("div",C,[t[2]||(t[2]=s("div",{class:"stat-label"},"Total Games",-1)),s("div",F,l(o.value.total_games),1)]),s("div",M,[t[3]||(t[3]=s("div",{class:"stat-label"},"Games Solved",-1)),s("div",N,l(o.value.total_solved),1),s("div",$,l(o.value.solve_rate)+"% solve rate",1)]),s("div",j,[t[4]||(t[4]=s("div",{class:"stat-label"},"Avg Attempts",-1)),s("div",z,l(o.value.avg_attempts||"-"),1)]),s("div",G,[t[5]||(t[5]=s("div",{class:"stat-label"},"Active (7d)",-1)),s("div",R,l(o.value.active_users_7d),1)]),s("div",U,[t[6]||(t[6]=s("div",{class:"stat-label"},"Today's Word",-1)),s("div",V,l(o.value.today.word||"-"),1),s("div",E,l(o.value.today.games)+" games, "+l(o.value.today.solved)+" solved",1)])]),s("div",I,[s("div",O,[t[7]||(t[7]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"Today's Attempts Distribution")],-1)),s("div",P,[(i(),d(u,null,_(6,a=>s("div",{key:a,class:"distribution-row"},[s("span",W,l(a),1),s("div",X,[s("div",{class:"distribution-bar",style:f({width:`${(n.value[String(a)]||0)/m()*100}%`})},[s("span",q,l(n.value[String(a)]||0),1)],4)])])),64))])]),s("div",H,[t[9]||(t[9]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"Today's Leaderboard")],-1)),c.value.length===0?(i(),d("div",J," No games played today yet ")):(i(),d("table",K,[t[8]||(t[8]=s("thead",null,[s("tr",null,[s("th",null,"Rank"),s("th",null,"User"),s("th",null,"Result"),s("th",null,"Time")])],-1)),s("tbody",null,[(i(!0),d(u,null,_(c.value,a=>(i(),d("tr",{key:a.rank},[s("td",null,[s("span",{class:k(["rank",{"rank-top":a.rank<=3}])}," #"+l(a.rank),3)]),s("td",null,l(a.username),1),s("td",null,[a.solved?(i(),d("span",Q,l(a.attempts)+"/6 ",1)):(i(),d("span",Y,"X/6"))]),s("td",Z,l(h(a.time_seconds)),1)]))),128))])]))])])],64)):g("",!0)]))}}),ls=w(ss,[["__scopeId","data-v-9895d7a2"]]);export{ls as default};
